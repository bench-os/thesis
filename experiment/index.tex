\chapter{Experiment \label{chap:experiment}}

In order to measure the context switching time, we have imagined to build our framework as a proxy between the interrupts and the tasks.
In this way, our framework would be able to intercept interrupts and context switchs in order to measure them as show in the figure \ref{fig:proxy-framework}.

\begin{figure}[!ht]
  \centering
  \includegraphics[scale=1]{assets/proxy-framework.pdf}
  \caption{Benchmarking framework proxy\label{fig:proxy-framework}}
\end{figure}


However, our main concern was to implement a framework that measures the context switching time without altering it.
Indeed, we do not want our framework to slow down the application by adding an overhead.
To discuss this issue, we have contacted and discussed with some IoT communities.
Via mailing lists, we communicated with communities from RIOT OS, Contiki, FreeRTOS, mBed OS and Apache Mynewt.
We also exchanged ideas with IoT developers through forums on the web.
The different communities gave us some advices and helped us elaborate our three successive approaches.
These three approaches are described in this chapter.

\input{experiment/kernel.tex}
\input{experiment/extension.tex}
\input{experiment/external.tex}